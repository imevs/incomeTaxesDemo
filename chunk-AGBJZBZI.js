import{b as m}from"./chunk-DDMCPOCP.js";import{Aa as b,Ea as S,Fa as _,Ga as M,Ha as p,Ia as c,Ja as v,La as x,Na as W,Oa as E,Pa as k,Qa as w,Ra as u,Sa as N,Ta as D,V as C,Xa as O,Ya as T,Za as F,bc as y,ec as I,fc as R,jc as B,ka as i,kc as L,lc as P,oc as A,pc as Q,qa as f,qc as U,rc as V,sc as l,uc as j}from"./chunk-5WLU4PN2.js";function Z(o,e){if(o&1&&(p(0,"option",1),u(1),c()),o&2){let t=e.$implicit;W("value",t),i(),N(t)}}var g=3e3,d="gross",z={type:"line",borderColor:"black",borderWidth:2,display:o=>o.chart.isDatasetVisible(1),label:{display:!0,content:()=>d+": "+g,position:"end"},scaleID:"y",value:()=>g},q=class o{get incomeType(){return d}get income(){return g}set income(e){g=e}salariesSamples=V;metricsNameMap=m;chartExpenses;calculationList=[];expensesChartOptions={scales:{x:{stacked:!0},y:{ticks:{callback:(e,t,a)=>j(e,0,"EUR")},stacked:!0,beginAtZero:!0}},animation:{delay:200,duration:0},plugins:{annotation:{annotations:{annotation:z}},legend:{display:!0,align:"end"},datalabels:{display:function(e){let t=e.dataset.data?.[e.dataIndex];return typeof t=="number"&&t>30},backgroundColor:function(e){return e.dataset.backgroundColor},borderColor:"white",borderRadius:10,borderWidth:1,color:"white",anchor:"center",formatter:e=>l(e)}}};expensesChartData={labels:[],datasets:[]};ngOnChanges(e){let t=["net","taxes_socialTaxByWorker","taxes_income","taxes_socialTaxByEmployer","taxes_solidarity","costForEmployer","gross"],a=new URLSearchParams(location.hash.replace("#",""));d=a.get("kind")==="full"?"costForEmployer":a.get("kind"),this.expensesChartData={labels:this.calculationList.map(r=>r.options.country+" / "+r.options.year),datasets:t.map(r=>{let n=this.calculationList.map(s=>{let{exchangeRate:h}=U[s.options.country];return l((s.reports.find(G=>Math.abs(l(G[d],0)-l(this.income*h,0))<50)?.[r]??0)/h,0)});return r==="gross"||r==="costForEmployer"?{label:m[r],data:n,type:"line",stack:r,hoverBorderWidth:5,datalabels:{align:r==="gross"?"start":"end",anchor:"end",opacity:s=>s.dataset.data?.[s.dataIndex]}}:{label:m[r],data:n}})},this.chartExpenses?.update()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["wage-structure-comparison"]],viewQuery:function(t,a){if(t&1&&E(y,5),t&2){let r;k(r=w())&&(a.chartExpenses=r.first)}},inputs:{calculationList:"calculationList"},features:[C],decls:7,vars:5,consts:[["id","selectedGross",3,"ngModelChange","ngModel"],[3,"value"],["baseChart","",3,"data","options","type"]],template:function(t,a){t&1&&(p(0,"h2"),u(1,"Wage structure for "),p(2,"select",0),F("ngModelChange",function(n){return T(a.income,n)||(a.income=n),n}),x("ngModelChange",function(){return a.ngOnChanges({})}),_(3,Z,2,2,"option",1,S),c(),u(5),c(),v(6,"canvas",2)),t&2&&(i(2),O("ngModel",a.income),i(),M(a.salariesSamples),i(2),D(' EUR by "',a.metricsNameMap[a.incomeType],`"
`),i(),b("data",a.expensesChartData)("options",a.expensesChartOptions)("type","bar"))},dependencies:[y,Q,L,P,B,I,A,R],encapsulation:2})};export{q as WageStructureComparison};
